@page "/dashboard-page"
@inherits LayoutComponentBase
@inject NavigationManager Navigation

<style>
    .dashboard-container {
        padding: 20px;
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }

    .dashboard-header {
        align-self: flex-start;
        width: 100%;
        max-width: 1200px;
        padding-left: 20px;
        color: #2d3436;
        font-size: 24px;
        margin-bottom: 20px;
    }

    .carousel {
        display: flex;
        align-items: center;
        overflow: hidden;
        width: 100%;
        max-width: 1200px;
        margin-bottom: 20px;
        position: relative;
    }

    .card {
        flex: 0 0 50%;
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        padding: 25px;
        margin: 10px;
        min-width: 450px;
        height: 250px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        background-color: #ffffff;
    }

    .carousel-button {
        position: absolute;
        right: 10px;
        background-color: rgba(40, 167, 69, 0.8);
        color: white;
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        cursor: pointer;
        font-size: 18px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s ease;
    }

    .carousel-button:hover {
        background-color: rgba(33, 136, 56, 0.8);
    }

    .weekly-activity {
        margin-top: 20px;
        width: 100%;
    }

    .weekly-activity .card {
        width: 100%;
        height: 300px;
        padding: 20px;
    }

    h3, h4 {
        color: #2d3436;
    }

    .manage-saving-goals-header {
        color: green;
        text-decoration: underline;
        cursor: pointer; /* Make the header clickable */
    }

    .manage-saving-goals-header:hover {
        color: darkgreen; /* Darker green on hover */
    }
</style>

@code {
    [CascadingParameter] private Action<string> SetPageTitle { get; set; }

    private int currentIndex = 0;
    private List<string> cards = new List<string> { "History", "Recent Transactions", "Manage Saving Goals" };

    protected override void OnInitialized()
    {
        SetPageTitle("Dashboard");
    }

    private void NextCard()
    {
        currentIndex = (currentIndex + 1) % cards.Count;
    }

    private void NavigateToSavingGoals()
    {
        Navigation.NavigateTo("/view-goals-page");
    }
}

<div class="dashboard-container">
    <div class="dashboard-header">
        <h3>Welcome back to JAMPER Finance!</h3>
    </div>

    <!-- Carousel Section -->
    <div class="carousel">
        <div class="card">
            <h3 class="@(cards[currentIndex] == "Manage Saving Goals" ? "manage-saving-goals-header" : "")" 
                @onclick="@(() => { if (cards[currentIndex] == "Manage Saving Goals") NavigateToSavingGoals(); })">
                @cards[currentIndex]
            </h3>
        </div>
        <div class="card">
            <h3 class="@(cards[(currentIndex + 1) % cards.Count] == "Manage Saving Goals" ? "manage-saving-goals-header" : "")" 
                @onclick="@(() => { if (cards[(currentIndex + 1) % cards.Count] == "Manage Saving Goals") NavigateToSavingGoals(); })">
                @cards[(currentIndex + 1) % cards.Count]
            </h3>
        </div>
        <button class="carousel-button" @onclick="NextCard">&#10095;</button>
    </div>

    <!-- Weekly Activity Section -->
    <div class="weekly-activity">
        <h4>Weekly Activity</h4>
        <div class="card">Placeholder for weekly activities...</div>
    </div>
</div>